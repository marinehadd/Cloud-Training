 - 

# Lab 1 : Create an environment

 Go to [https://aws.amazon.com/login](https://aws.amazon.com/free/) and choose the region

## Setup a VPC

 Go to VPC services then Your VPCs and create VPC
	- Click Create
	- Enter a name i.e. VPC-YourName
	- IPv4 CIDR : 10.0.0.0/16

You now have a VPC and an associated routing table created. Your VPC will need to be able to host instances accessible from both private environment and the Internet.

Go to Subnets and create a public and a private subnets.
- Subnet 1:
	- Name : YourName-Pub-Sub
	- Select your VPC
	- Select the first availability zone of your region (i.e. 1a)
	- IPv4 CIDR 10.0.1.0/24
- Subnet 2:
	- Name : YourName-Priv-Sub
	- Select your VPC
	- Select the second availability zone of your region (i.e. 1b)
	- IPv4 CIDR 10.0.2.0/24

Select Subnet 1, go to Actions and modify the auto-assign IP settings to allow the subnet to obtain public IP addresses dynamically.
In Routes Tables, select your VPC route table and notice the two subnets associated. They should find the ones you created above.

The public subnet needs access to the Internet which will be provided by an Internet Gateway.
Go to Internet Gateways and create one YourName-IGW. Then select it, Actions, and attach to your VPC.

Go back to your route table and notice that you have a new route 0.0.0.0/0 which is the association of your internet gateway. This means that both /24 subnets can now access the internet via this gateway.
However, only the public subnet (subnet 1) should be able to access the Internet.

 

- Go to EC2 dashboard and launch a private instance
	- Select Amazon Linux AMI
		- Instance settings
			- In network, choose the new created VPC
			- Choose the private subnet
			- Assign IAM role XXXX - do we create one for them before the training ?
			- Leave default for the rest
		- Storage : Leave default settings
		- Tag
			- Name : IMS priv Name
		- Create a security Group ims-lab-sg : Allow SSH and HTTPS from 0.0.0.0/0
		- Launch
			- Create a new key pair
			- Name : ims-ec2-key
			- Download your pem key pair file and store it into your home drive
- Create a Bastion instance
	- 	- Select Amazon Linux AMI
		- Instance settings
			- Use the same settings as the previous instance
			- Network interfaces, select :
				- private subnet for eth0
				- public subnet for eth1
		- Storage : Leave default settings
		- Tag
			- Name : IMS Bastion
		- Choose existing Security Group ims-lab-sg
		- Launch
			- Choose existing key pair ims-ec2-key
			- Acknowledge and launch
- Click view instances and wait for the running state to appear
- 




<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEzNzE5Nzk5MjUsLTEwNDM4OTI4MDcsMT
YyNzQ4NDI3NSwtMjczMDMyNzgsMjEyNTkwOTM3LC02Njg1ODc2
NjksMjA4ODI2NDgzMiwtMjg4ODc5MjcsMjQwNjcyOTU4LC00OT
A5MDQ2MTIsLTE4ODcxMDgzMDIsMTM4Mzk5NzkwNCwtMjY2NDU0
MjA2LC0xMjQyMjgyNjYyLC03MjY2ODE4MDQsLTE2NzY5MDkxMj
BdfQ==
-->